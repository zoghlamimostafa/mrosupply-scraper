# MRO Supply Scraper - Configuration Template
# Copy this file to .env and fill in your actual values

# ============== Proxy Configuration ==============
# Webshare rotating residential proxy settings
PROXY_HOST=p.webshare.io
PROXY_PORT=10000
PROXY_USER=your_username_here
PROXY_PASS=your_password_here

# ============== Scraper Settings ==============
# Number of concurrent worker threads
WORKERS=20

# Delay between requests in seconds
DELAY=0.3

# Number of consecutive 429 errors before cooldown
RATE_LIMIT_THRESHOLD=10

# Minutes to wait during rate limit cooldown
COOLDOWN_MINUTES=15

# Save checkpoint every N products
CHECKPOINT_INTERVAL=50

# Maximum retry attempts per URL
MAX_RETRIES=5

# Base delay for retries (seconds)
RETRY_DELAY=60

# ============== Email Notifications (SMTP) ==============
# Gmail example: smtp.gmail.com:587 (use app password, not main password)
# Mailgun: smtp.mailgun.org:587
# SendGrid: smtp.sendgrid.net:587
# Amazon SES: email-smtp.us-east-1.amazonaws.com:587

SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your_email@gmail.com
SMTP_PASS=your_app_password_here
NOTIFICATION_EMAIL=alerts@example.com
ALERT_EMAIL=critical@example.com

# Enable/disable email notifications
EMAIL_ON_START=true
EMAIL_ON_COMPLETE=true
EMAIL_ON_ERROR=true

# Send progress update emails every N hours
EMAIL_INTERVAL_HOURS=6

# ============== Dashboard Settings ==============
# Web dashboard configuration
DASHBOARD_ENABLED=true
DASHBOARD_PORT=8080
DASHBOARD_HOST=127.0.0.1
DASHBOARD_PASSWORD=change_this_secure_password
DASHBOARD_SECRET_KEY=generate_random_key_here

# ============== Health Check Settings ==============
# Health check interval in seconds
HEALTH_CHECK_INTERVAL=300

# Max consecutive health check failures before alert
MAX_CONSECUTIVE_FAILURES=3

# Memory threshold in MB (alert if exceeded)
MEMORY_THRESHOLD_MB=3000

# Disk space threshold in GB (alert if below)
DISK_SPACE_THRESHOLD_GB=5

# Minutes without checkpoint update = stale
STALE_CHECKPOINT_MINUTES=30

# ============== Watchdog Settings ==============
# Enable automatic process supervision
WATCHDOG_ENABLED=true

# Seconds to wait before restarting after crash
RESTART_DELAY_SECONDS=30

# Maximum restarts per hour (safety limit)
MAX_RESTARTS_PER_HOUR=5

# Maximum total restarts before giving up
MAX_TOTAL_RESTARTS=20

# ============== Data Validation Settings ==============
# Enable product data quality validation
VALIDATE_DATA=true

# Minimum required fields for valid product
MIN_FIELDS_REQUIRED=3

# Maximum percentage of empty optional fields allowed
MAX_EMPTY_PERCENTAGE=0.2

# ============== Performance Settings ==============
# Enable adaptive rate limiting (auto-adjust speed)
ADAPTIVE_RATE_LIMIT=true

# Bandwidth limit in Mbps (0 = unlimited)
BANDWIDTH_LIMIT_MBPS=0

# Memory limit in MB (soft limit for monitoring)
MEMORY_LIMIT_MB=4000

# ============== Scheduling Settings (Optional) ==============
# Enable time-based scheduling
SCHEDULE_ENABLED=false

# Start scraping at this time (24-hour format)
SCHEDULE_START_TIME=22:00

# Stop scraping at this time (24-hour format)
SCHEDULE_END_TIME=06:00

# Pause scraping on weekends
PAUSE_ON_WEEKENDS=false

# ============== Cost Tracking ==============
# Proxy cost per GB of bandwidth
PROXY_COST_PER_GB=0.0

# Server cost per hour
SERVER_COST_PER_HOUR=0.50

# ============== Paths ==============
# Output directory for scraped data
OUTPUT_DIR=full_scrape

# Log directory (default: OUTPUT_DIR/logs)
LOG_DIR=full_scrape/logs

# Input file with product URLs
URL_FILE=all_product_urls_20251215_230531.txt

# ============== Duplicate Detection ==============
# Enable duplicate URL detection
ENABLE_DUPLICATE_DETECTION=true

# Method: url_hash or exact_match
DUPLICATE_CHECK_METHOD=url_hash

# ============== Bandwidth Throttling ==============
# Enable bandwidth throttling
ENABLE_BANDWIDTH_THROTTLE=false

# Maximum bandwidth in Mbps
MAX_BANDWIDTH_MBPS=10

# ============== Notes ==============
# For Gmail SMTP:
# 1. Enable 2-factor authentication on your Google account
# 2. Generate an "App Password" at https://myaccount.google.com/apppasswords
# 3. Use that app password in SMTP_PASS (not your regular password)
#
# For Dashboard:
# - Generate DASHBOARD_SECRET_KEY with: python3 -c "import os; print(os.urandom(24).hex())"
# - Access dashboard via SSH tunnel: ssh -L 8080:localhost:8080 user@server
# - Then open: http://localhost:8080
#
# For Production:
# - Never commit .env to version control
# - Use strong passwords
# - Restrict dashboard access (firewall or SSH tunnel)
# - Monitor email alerts regularly
